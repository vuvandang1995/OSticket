{% extends 'agent/base_leader.html' %}
{% block title %}Leader{% endblock %}
{% load static %}
{% block js %}
<script src="{% static 'js/manager_topic.js' %}"></script>
{% endblock %}
{% block content %}
    <div class="container" id="list_topic">
        <h2>All Topic</h2>
        <br/>
        <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-title="add" data-target="#topicModal" >
            <span class="glyphicon glyphicon-plus"></span> Create new topic
        </button>
        <br/>
        <br/>
        <table class="table table-striped table-bordered">
            <thead class = thead-dark>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Status</th>
                <th>Description</th>
                <th>Type send</th>
                <th>Tùy chọn</th>
            </tr>
            </thead>
            <tbody>
                {% csrf_token %}
            {% for tp in topic %}
            <tr>

                <td>{{tp.id}}</td>

                <td>{{tp.name}}</td>

                {% if tp.status == 0 %}
                <td><span class="label label-success">enable</span></td>
                {% else %}
                <td><span class="label label-danger">disable</span></td>
                {% endif %}

                <td id="description_topic{{tp.id}}">{{ tp.description}}</td>

                {% if tp.type_send == 1 %}
                    <td id="type_send{{tp.id}}">All</td>
                {% else %}
                    <td id="type_send{{tp.id}}">Leader</td>
                {% endif %}

                {% if tp.name == 'Other' %}
                    <td></td>
                {% else %}
                    <td>
                        
                        <button type="button" class="btn btn-primary close_" id="{{tp.id}}" data-toggle="tooltip" title="enable/disable">
                            <span class="glyphicon glyphicon-off"></span>
                        </button>

                        <button type="button" class="btn btn-danger" id="{{tp.id}}" data-toggle="tooltip" title="delete">
                            <span class="glyphicon glyphicon-trash"></span>
                        </button>

                        <button type="button" class="btn btn-info" data-name="{{tp.name}}" data-title="edit" id="{{tp.id}}" data-toggle="modal" data-target="#topicModal">
                            <span class="glyphicon glyphicon-wrench" data-toggle="tooltip" title="change"></span>
                        </button>
                    </td>
                {% endif%}
            </tr>
            {% endfor%}
            </tbody>
        </table>
    </div>



    <div id="topicModal" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h3 class="modal-title" style= "color: red";><strong>Add New Topic</strong></h3>
                </div>
                
                <div class="modal-body form-group">
                    <label for="topicname"><b>Topic name</b></label>
                    <input type="text" placeholder="Enter Topic name" name="topicname" required>

                    <label for="description"><b>Description</b></label>
                    <input type="text" placeholder="Enter description" name="description" required>

                    <input class="inputText" type="checkbox" name="type_send" > <b> Type send</b>

                    <input type="hidden" name="topicid" value="">                        

                <div class="msg"></div>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal" id = "add_topic_close">Close</button>
                    <button type="button" id="addTopic" class="btn btn-success">Save</button>
                </div>
    
            </div>
        </div>
    </div>
{% endblock %}