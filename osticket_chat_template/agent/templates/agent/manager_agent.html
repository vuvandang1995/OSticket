<!DOCTYPE html>
<html lang="en">
<head>
    {% load staticfiles %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="{% static 'css/header.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'css/form.css' %}" type="text/css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="{% static 'js/manager_agent.js' %}"></script>
    <title>{{ admin.fullname}}</title>
</head>
<body>
<div class="header">
        <nav class="main-menu">
				<ul>
                    <li><a href="{% url 'agent:home_admin' %}">Ticket</a></li>
                    <li><a href="{% url 'agent:manager_agent' %}">Agent</a></li>
                    <li><a href="{% url 'agent:manager_topic' %}">Topic</a></li>
                    <li><a href="{% url 'agent:history_all_ticket' today|safe 3 %}">History all ticket</a></li>
                    <li><a href="{% url 'agent:logout_admin' %}">Logout</a></li>
				</ul>
		</nav>
    </div>
    <br />
    <br />
        <div class="container" id="list_agent">
            <h2>All Agent</h2>
            <p>Đây là bảng danh sách tất cả Agent trên hệ thống:</p>
            <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-title="add" data-target="#topicModal" >
                <span class="glyphicon glyphicon-plus"></span> Create new agent
            </button>
            <br/>
            <br/>
            <table class="table table-striped table-bordered">
                <thead class = thead-dark>
                <tr>
                    <th>ID</th>
                    <th>Full Name</th>
                    <th>Username</th>
                    <th>Email</th>
                    <th>SĐT</th>
                    <th>Admin</th>
                    <th>Status</th>
                    <th>TK Done</th>
                    <th>TK Processing</th>
                    <th>Tùy chọn</th>

                </tr>
                </thead>
                <tbody>

                {% for ag in agent %}
                <tr>

                    <td>{{ag.id}}</td>

                    <td id="full_name{{ag.id}}">{{ag.fullname}}</td>

                    <td id="user_name{{ag.id}}">{{ag.username}}</td>

                    <td id="email_agent{{ag.id}}">{{ag.email}}</td>

                    <td id="phone_agent{{ag.id}}">{{ag.phone}}</td>

                    {% if ag.admin == 0 %}
                        <td>No</td>
                    {% else %}
                        <td>Yes</td>
                    {% endif %}

                    {% if ag.status == 0 %}
                        <td>No</td>
                    {% else %}
                        <td>Yes</td>
                    {% endif %}

                    {% for key, value in list_tk %}
                        {% if key == ag.username %}
                            <td>{{ value.0 }}</td>
                            <td>{{ value.1 }}</td>
                        {% endif %}
                    {% endfor %}
                    <td>
                        {% csrf_token %}
                        <button type="button" class="btn btn-primary close_" id="{{ag.id}}">
                            <span class="glyphicon glyphicon-off"></span>
                        </button>

                        <button type="button" class="btn btn-danger" id="{{ag.id}}">
                            <span class="glyphicon glyphicon-trash"></span>
                        </button>

                        <button type="button" class="btn btn-info" data-title="edit" id="{{ag.id}}" data-toggle="modal" data-target="#topicModal">
                            <span class="glyphicon glyphicon-wrench"></span>
                        </button>
                    </td>
                </tr>
                {% endfor%}
                </tbody>
            </table>
        </div>

    <div id="topicModal" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h3 class="modal-title" style= "color: red";><strong>Add New Agent</strong></h3>
                </div>
                
                <div class="modal-body form-group">
                    <label for="fullname"><b>Full name</b></label>
                    <input class="inputText" type="text" placeholder="Full name" name="fullname" >
        
                    <label for="email"><b>Email</b></label>
                    <input class="inputText" type="text" placeholder="Enter Email" name="email">

                    <div id="user_agent">
                    <label for="username"><b>Username</b></label>
                    <input class="inputText" type="text" placeholder="Enter Username" name="username" >
                    </div>

                    <label for="phone"><b>Phone</b></label>
                    <input class="inputText" type="text" placeholder="Enter your phone number" name="phone">
                    
                    <div id="pwd">
                    <label for="psw"><b>Password</b></label>
                    <input class="inputText" type="password" placeholder="Enter Password" name="password" id="p1" >
              
                    <label for="psw-repeat"><b>Repeat Password</b></label>
                    <input class="inputText" type="password" placeholder="Repeat Password" name="password2" id="p2">
                    </div>
                    <input type="hidden" name="agentid" value="">                        

                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal" id = "add_agent_close">Close</button>
                    <button type="button" id="addAgent" class="btn btn-success">Save</button>
                </div>
    
            </div>
        </div>
    </div>

</body>
</html>